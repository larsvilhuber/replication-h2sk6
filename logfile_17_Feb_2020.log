----------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  \\rschfs1x\userRS\K-Q\nwl27_RS\Documents\Workspace\socarxiv\replication-h2sk6/logfile_1
> 7_Feb_2020.log
  log type:  text
 opened on:  17 Feb 2020, 15:55:19

. 
. /* It will provide some info about how and when the program was run */
. /* See https://www.stata.com/manuals13/pcreturn.pdf#pcreturn */
. local variant = cond(c(MP),"MP",cond(c(SE),"SE",c(flavor)) )  

. // alternatively, you could use 
. // local variant = cond(c(stata_version)>13,c(real_flavor),"NA")  
. 
. di "=== SYSTEM DIAGNOSTICS ==="
=== SYSTEM DIAGNOSTICS ===

. di "Stata version: `c(stata_version)'"
Stata version: 16

. di "Updated as of: `c(born_date)'"
Updated as of: 05 Nov 2019

. di "Variant:       `variant'"
Variant:       MP

. di "Processors:    `c(processors)'"
Processors:    8

. di "OS:            `c(os)' `c(osdtl)'"
OS:            Windows 64-bit

. di "Machine type:  `c(machine_type)'"
Machine type:  PC (64-bit x86-64)

. di "=========================="
==========================

. 
. 
. /* install any packages locally */
. capture mkdir "`pwd'/ado"

. sysdir set PERSONAL "`pwd'/ado/personal"

. sysdir set PLUS     "`pwd'/ado/plus"

. sysdir set SITE     "`pwd'/ado/site"

. 
end of do-file

. quietly infix              ///
>   int     year      1-4    ///
>   byte    statefip  5-6    ///
>   double  perwt     7-16   ///
>   byte    sex       17-17  ///
>   int     age       18-20  ///
>   byte    marst     21-21  ///
>   byte    marrno    22-22  ///
>   int     yrmarr    23-26  ///
>   byte    divinyr   27-27  ///
>   byte    hispan    28-28  ///
>   byte    citizen   32-32  ///
>   byte    racamind  33-33  ///
>   byte    racasian  34-34  ///
>   byte    racblk    35-35  ///
>   byte    racpacis  36-36  ///
>   byte    racwht    37-37  ///
>   int     educd     40-42  ///
>   using "${pathname}/usa_00388.dat"

.     
. /* sample is 2008-2017 American Community Surveys, women age 15+ who have ever
>    been married and lived in the US one year before the survey */
. 
. keep if marst<4 | divinyr==2 /* currently married or divorced in previous year */
(2,814,311 observations deleted)

. gen divorced = divinyr==2

. drop divinyr

. 
. replace perwt   = perwt   / 10000
(6,969,409 real changes made)

. 
. format perwt   %10.2f

. 
. label var perwt   "Person weight"

. label var sex     "Sex"

. label var age     "Age"

. label var marst   "Marital status"

. label var yrmarr  "Year married"

. 
. label define sex_lbl 1 "Male"

. label define sex_lbl 2 "Female", add

. label values sex sex_lbl

. 
. label define marst_lbl 1 "Married, spouse present"

. label define marst_lbl 2 "Married, spouse absent", add

. label define marst_lbl 3 "Separated", add

. label define marst_lbl 4 "Divorced", add

. label define marst_lbl 5 "Widowed", add

. label define marst_lbl 6 "Never married/single", add

. label values marst marst_lbl

. 
. gen yrsmar = year-yrmarr

. keep if yrsmar>0  /* <-- I didnt do this in past blog post rates, so they arent comparable. its to
>  get rid of marriages that might be after the divorce */
(90,500 observations deleted)

. 
. gen ageatmar = age-yrsmar

. 
. gen female = sex==2

. drop sex

. gen age2 = age*age

. gen yrsmar2 = yrsmar*yrsmar

. 
. gen hispanic=hispan>0

. gen foreign = citizen>0

. drop citizen

. 
. gen wnhisp = (hispan==0 & racwht==2 & racamind==1 & racasian==1 & racpacis==1 & racblk==1)

. 
. gen rac3 = 4

. replace rac3 = 1 if wnhisp==1
(5,122,748 real changes made)

. replace rac3 = 2 if racblk==2
(478,096 real changes made)

. replace rac3 = 3 if hispanic==1
(781,929 real changes made)

. 
. label define rac3_lbl 1 "White NH"

. label define rac3_lbl 2 "Black", add

. label define rac3_lbl 3 "Hispanic", add

. label define rac3_lbl 4 "Other", add

. label values rac3 rac3_lbl

. 
. recode age (16/34=1) (35/44=2) (45/54=3) (55/100=4), gen(agecat)
(6878909 differences between age and agecat)

. 
. label define agecat_lbl 1 "<35"

. label define agecat_lbl 2 "35-44", add

. label define agecat_lbl 3 "45-54", add

. label define agecat_lbl 4 "55+", add

. label values agecat agecat_lbl

. 
. recode educd (0/61=1)(62/65=2) (70/100=3) (101/116=4), gen(edcat)
(6878909 differences between educd and edcat)

. 
. label define edcat_lbl 1 "<HS"

. label define edcat_lbl 2 "HS", add

. label define edcat_lbl 3 "Some col", add

. label define edcat_lbl 4 "BA+", add

. label values edcat edcat_lbl

. 
. *sum
. 
. /* make 1% test sample
> gen temp = runiform()
> gen test = temp<.001
> drop temp
> */
. 
. 
. /* Table 1 */
. /* couple things just for the descriptive tab... don't mind me while I multiply and divide weights
>  by constants */
. gen intwt=int(100*perwt)

. recode yrsmar (1/9=1) (10/19=10) (20/29=20) (30/90=30), gen(yrmrcat) /* <-- just for the table */
(6246203 differences between yrsmar and yrmrcat)

. tab1 divorced year agecat yrmrcat marrno foreign edcat rac3 [weight=intwt]
(frequency weights assumed)

-> tabulation of divorced  

   divorced |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |623,672,257       98.18       98.18
          1 | 11,585,994        1.82      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of year  

       year |      Freq.     Percent        Cum.
------------+-----------------------------------
       2008 | 62,483,013        9.84        9.84
       2009 | 62,551,775        9.85       19.68
       2010 | 63,055,141        9.93       29.61
       2011 | 62,979,620        9.91       39.52
       2012 | 63,216,863        9.95       49.47
       2013 | 63,487,758        9.99       59.47
       2014 | 63,744,892       10.03       69.50
       2015 | 63,976,603       10.07       79.57
       2016 | 64,407,604       10.14       89.71
       2017 | 65,354,982       10.29      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of agecat  

  RECODE of |
  age (Age) |      Freq.     Percent        Cum.
------------+-----------------------------------
        <35 |115,044,419       18.11       18.11
      35-44 |137,016,261       21.57       39.68
      45-54 |147,082,460       23.15       62.83
        55+ |236,115,111       37.17      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of yrmrcat  

  RECODE of |
     yrsmar |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |172,285,551       27.12       27.12
         10 |151,793,383       23.89       51.02
         20 |118,501,818       18.65       69.67
         30 |192,677,499       30.33      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of marrno  

     marrno |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |487,582,809       76.75       76.75
          2 |118,157,475       18.60       95.35
          3 | 29,517,967        4.65      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of foreign  

    foreign |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |510,465,562       80.36       80.36
          1 |124,792,689       19.64      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of edcat  

  RECODE of |
      educd |      Freq.     Percent        Cum.
------------+-----------------------------------
        <HS | 69,791,551       10.99       10.99
         HS |209,572,378       32.99       43.98
   Some col |151,555,506       23.86       67.83
        BA+ |204,338,816       32.17      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

-> tabulation of rac3  

       rac3 |      Freq.     Percent        Cum.
------------+-----------------------------------
   White NH |445,456,597       70.12       70.12
      Black | 51,099,098        8.04       78.17
   Hispanic | 88,324,785       13.90       92.07
      Other | 50,377,771        7.93      100.00
------------+-----------------------------------
      Total |635,258,251      100.00

. 
. /* Table 2 */
. logit divorced i.year age age2 yrsmar i.marrno foreign i.edcat i.rac3 [pweight=perwt]

Iteration 0:   log pseudolikelihood = -579019.13  
Iteration 1:   log pseudolikelihood = -558125.15  
Iteration 2:   log pseudolikelihood = -554231.13  
Iteration 3:   log pseudolikelihood = -554167.37  
Iteration 4:   log pseudolikelihood = -554167.18  
Iteration 5:   log pseudolikelihood = -554167.18  

Logistic regression                             Number of obs     =  6,878,909
                                                Wald chi2(21)     =   26930.42
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -554167.18               Pseudo R2         =     0.0429

------------------------------------------------------------------------------
             |               Robust
    divorced |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2009  |  -.0616418   .0166707    -3.70   0.000    -.0943158   -.0289678
       2010  |  -.0217163   .0164305    -1.32   0.186    -.0539196     .010487
       2011  |  -.0053266   .0173909    -0.31   0.759     -.039412    .0287589
       2012  |    .017688   .0169389     1.04   0.296    -.0155117    .0508877
       2013  |  -.0455534   .0172083    -2.65   0.008    -.0792811   -.0118257
       2014  |  -.0707527   .0174069    -4.06   0.000    -.1048695   -.0366358
       2015  |  -.0992775     .01766    -5.62   0.000    -.1338905   -.0646646
       2016  |  -.0818419   .0175313    -4.67   0.000    -.1162026   -.0474812
       2017  |  -.1109491   .0175754    -6.31   0.000    -.1453962   -.0765019
             |
         age |   -.000699   .0020065    -0.35   0.728    -.0046316    .0032336
        age2 |  -.0002922   .0000212   -13.77   0.000    -.0003337   -.0002506
      yrsmar |  -.0167717   .0005645   -29.71   0.000    -.0178781   -.0156653
             |
      marrno |
          2  |   .4052035   .0110836    36.56   0.000       .38348     .426927
          3  |   .8246968   .0169138    48.76   0.000     .7915464    .8578472
             |
     foreign |  -.3616305   .0140568   -25.73   0.000    -.3891814   -.3340797
             |
       edcat |
         HS  |    .020312   .0149459     1.36   0.174    -.0089815    .0496054
   Some col  |   .0568524   .0154452     3.68   0.000     .0265803    .0871245
        BA+  |  -.3275703   .0159557   -20.53   0.000    -.3588428   -.2962978
             |
        rac3 |
      Black  |   .4937112   .0124837    39.55   0.000     .4692435    .5181788
   Hispanic  |     .03872   .0142519     2.72   0.007     .0107869    .0666531
      Other  |  -.0322356   .0184684    -1.75   0.081    -.0684329    .0039617
             |
       _cons |  -2.996036   .0470246   -63.71   0.000    -3.088203    -2.90387
------------------------------------------------------------------------------

. margins year

Predictive margins                              Number of obs     =  6,878,909
Model VCE    : Robust

Expression   : Pr(divorced), predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2008  |   .0190808   .0002173    87.82   0.000      .018655    .0195067
       2009  |   .0179696   .0002075    86.59   0.000     .0175629    .0183764
       2010  |   .0186819   .0002094    89.21   0.000     .0182715    .0190924
       2011  |   .0189822   .0002372    80.04   0.000     .0185174     .019447
       2012  |   .0194118   .0002307    84.16   0.000     .0189597    .0198639
       2013  |   .0182534    .000224    81.50   0.000     .0178145    .0186924
       2014  |   .0178109   .0002233    79.75   0.000     .0173731    .0182486
       2015  |   .0173225    .000223    77.69   0.000     .0168855    .0177595
       2016  |   .0176194   .0002237    78.77   0.000      .017181    .0180578
       2017  |   .0171264   .0002187    78.31   0.000     .0166978    .0175551
------------------------------------------------------------------------------

. 
. /* these are referenced in the paper but only age is presented */
. 
. * by age
. logit divorced i.year##i.agecat yrsmar i.marrno foreign i.edcat i.rac3 [pweight=perwt]

Iteration 0:   log pseudolikelihood = -579019.13  
Iteration 1:   log pseudolikelihood = -557583.52  
Iteration 2:   log pseudolikelihood = -554224.42  
Iteration 3:   log pseudolikelihood =  -554210.6  
Iteration 4:   log pseudolikelihood = -554210.59  

Logistic regression                             Number of obs     =  6,878,909
                                                Wald chi2(49)     =   28625.49
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -554210.59               Pseudo R2         =     0.0428

------------------------------------------------------------------------------
             |               Robust
    divorced |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2009  |   -.018304   .0313493    -0.58   0.559    -.0797475    .0431395
       2010  |  -.0235796    .031105    -0.76   0.448    -.0845444    .0373852
       2011  |  -.0229995   .0330869    -0.70   0.487    -.0878487    .0418497
       2012  |  -.0256873   .0323836    -0.79   0.428     -.089158    .0377834
       2013  |  -.1111102   .0331243    -3.35   0.001    -.1760326   -.0461878
       2014  |  -.1448213   .0339715    -4.26   0.000    -.2114042   -.0782383
       2015  |  -.2206302   .0351305    -6.28   0.000    -.2894846   -.1517758
       2016  |   -.162855   .0343103    -4.75   0.000    -.2301019   -.0956081
       2017  |  -.2544636   .0347775    -7.32   0.000    -.3226263   -.1863009
             |
      agecat |
      35-44  |  -.1143607   .0311739    -3.67   0.000    -.1754605   -.0532609
      45-54  |  -.4355926   .0334267   -13.03   0.000    -.5011077   -.3700775
        55+  |  -.9165421    .037881   -24.20   0.000    -.9907876   -.8422967
             |
 year#agecat |
 2009#35-44  |  -.0571166   .0437829    -1.30   0.192    -.1429295    .0286962
 2009#45-54  |  -.0311661   .0455841    -0.68   0.494    -.1205094    .0581772
   2009#55+  |  -.1248451   .0501189    -2.49   0.013    -.2230763   -.0266139
 2010#35-44  |  -.0090286   .0434218    -0.21   0.835    -.0941338    .0760765
 2010#45-54  |   .0412325   .0452528     0.91   0.362    -.0474614    .1299265
   2010#55+  |  -.0253917   .0487347    -0.52   0.602      -.12091    .0701266
 2011#35-44  |   .0253003   .0463435     0.55   0.585    -.0655313    .1161319
 2011#45-54  |   .0674371   .0477749     1.41   0.158       -.0262    .1610743
   2011#55+  |  -.0277353   .0511718    -0.54   0.588    -.1280302    .0725595
 2012#35-44  |   .0323356   .0454274     0.71   0.477    -.0567005    .1213718
 2012#45-54  |   .1360661   .0464795     2.93   0.003      .044968    .2271642
   2012#55+  |   .0109961   .0497498     0.22   0.825    -.0865118     .108504
 2013#35-44  |   .0186468   .0464485     0.40   0.688    -.0723907    .1096842
 2013#45-54  |   .1673576    .047503     3.52   0.000     .0742535    .2604617
   2013#55+  |   .1138471   .0502533     2.27   0.023     .0153525    .2123418
 2014#35-44  |   .0384898   .0471936     0.82   0.415    -.0540079    .1309875
 2014#45-54  |    .189324   .0485856     3.90   0.000     .0940979    .2845501
   2014#55+  |   .0944354   .0503793     1.87   0.061    -.0043061    .1931769
 2015#35-44  |   .0897371   .0485431     1.85   0.065    -.0054056    .1848798
 2015#45-54  |   .2532012   .0493599     5.13   0.000     .1564576    .3499448
   2015#55+  |   .1767027    .051264     3.45   0.001     .0762271    .2771783
 2016#35-44  |   .0420582   .0476268     0.88   0.377    -.0512886     .135405
 2016#45-54  |   .1702549   .0490499     3.47   0.001     .0741188    .2663909
   2016#55+  |   .1394105   .0507749     2.75   0.006     .0398935    .2389274
 2017#35-44  |   .0663041   .0484185     1.37   0.171    -.0285945    .1612027
 2017#45-54  |   .3009655   .0493578     6.10   0.000     .2042261    .3977049
   2017#55+  |   .2463834   .0506235     4.87   0.000     .1471631    .3456037
             |
      yrsmar |  -.0219822   .0004798   -45.81   0.000    -.0229226   -.0210417
             |
      marrno |
          2  |   .3520224   .0107673    32.69   0.000     .3309188     .373126
          3  |   .7482205   .0163849    45.67   0.000     .7161066    .7803343
             |
     foreign |  -.3737173   .0140688   -26.56   0.000    -.4012916    -.346143
             |
       edcat |
         HS  |   .0273131   .0149387     1.83   0.067    -.0019662    .0565925
   Some col  |   .0646065   .0154334     4.19   0.000     .0343575    .0948555
        BA+  |  -.3338432   .0159361   -20.95   0.000    -.3650774   -.3026091
             |
        rac3 |
      Black  |   .4817176   .0124902    38.57   0.000     .4572373    .5061978
   Hispanic  |   .0482071   .0142407     3.39   0.001     .0202959    .0761183
      Other  |  -.0291274   .0184821    -1.58   0.115    -.0653517    .0070969
             |
       _cons |  -3.218021    .026756  -120.27   0.000    -3.270462   -3.165581
------------------------------------------------------------------------------

. margins i.year##i.agecat

Predictive margins                              Number of obs     =  6,878,909
Model VCE    : Robust

Expression   : Pr(divorced), predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2008  |   .0190924   .0002162    88.32   0.000     .0186687    .0195161
       2009  |   .0179541   .0002068    86.83   0.000     .0175488    .0183594
       2010  |   .0187007   .0002091    89.41   0.000     .0182908    .0191107
       2011  |   .0190023   .0002372    80.12   0.000     .0185375    .0194672
       2012  |   .0194175   .0002308    84.14   0.000     .0189652    .0198698
       2013  |   .0182519   .0002242    81.41   0.000     .0178124    .0186913
       2014  |   .0177931   .0002238    79.50   0.000     .0173545    .0182318
       2015  |   .0172786   .0002236    77.29   0.000     .0168404    .0177168
       2016  |   .0175606   .0002242    78.34   0.000     .0171212    .0179999
       2017  |    .017026   .0002191    77.71   0.000     .0165966    .0174554
             |
      agecat |
        <35  |   .0244266   .0002534    96.38   0.000     .0239299    .0249233
      35-44  |   .0223489   .0001787   125.04   0.000     .0219986    .0226992
      45-54  |   .0180758   .0001398   129.33   0.000     .0178019    .0183498
        55+  |   .0105334   .0001176    89.60   0.000      .010303    .0107638
             |
 year#agecat |
   2008#<35  |   .0267649   .0006035    44.35   0.000      .025582    .0279478
 2008#35-44  |   .0239611   .0005024    47.69   0.000     .0229764    .0249459
 2008#45-54  |   .0175258   .0004022    43.58   0.000     .0167375    .0183141
   2008#55+  |   .0109285   .0003006    36.35   0.000     .0103394    .0115177
   2009#<35  |   .0262958   .0005916    44.45   0.000     .0251363    .0274552
 2009#35-44  |     .02227   .0004757    46.82   0.000     .0213377    .0232024
 2009#45-54  |   .0166981    .000383    43.60   0.000     .0159474    .0174487
   2009#55+  |   .0094888   .0002778    34.16   0.000     .0089444    .0100332
   2010#<35  |    .026162   .0005814    45.00   0.000     .0250225    .0273015
 2010#35-44  |   .0232152   .0004873    47.64   0.000     .0222602    .0241703
 2010#45-54  |   .0178308   .0004026    44.28   0.000     .0170416      .01862
   2010#55+  |   .0104133   .0002801    37.18   0.000     .0098643    .0109622
   2011#<35  |   .0261767   .0006482    40.38   0.000     .0249062    .0274472
 2011#35-44  |   .0240146    .000572    41.98   0.000     .0228935    .0251358
 2011#45-54  |   .0183035   .0004532    40.39   0.000     .0174152    .0191918
   2011#55+  |   .0103952   .0003031    34.30   0.000     .0098012    .0109892
   2012#<35  |   .0261088   .0006231    41.90   0.000     .0248875      .02733
 2012#35-44  |    .024116    .000556    43.37   0.000     .0230263    .0252058
 2012#45-54  |   .0195198   .0004522    43.17   0.000     .0186336    .0204061
   2012#55+  |   .0107714   .0002939    36.65   0.000     .0101954    .0113474
   2013#<35  |   .0240368   .0005988    40.14   0.000     .0228631    .0252104
 2013#35-44  |   .0219043   .0005272    41.55   0.000      .020871    .0229376
 2013#45-54  |   .0185157   .0004473    41.40   0.000     .0176391    .0193924
   2013#55+  |   .0109581   .0002996    36.58   0.000     .0103709    .0115452
   2014#<35  |   .0232637   .0006064    38.36   0.000     .0220751    .0244522
 2014#35-44  |    .021611   .0005247    41.19   0.000     .0205825    .0226394
 2014#45-54  |   .0183046   .0004589    39.89   0.000     .0174053     .019204
   2014#55+  |   .0103988   .0002755    37.74   0.000     .0098587    .0109388
   2015#<35  |   .0216123   .0005944    36.36   0.000     .0204473    .0227773
 2015#35-44  |   .0211008   .0005343    39.49   0.000     .0200536     .022148
 2015#45-54  |   .0180926   .0004522    40.01   0.000     .0172063    .0189789
   2015#55+  |   .0104652   .0002783    37.61   0.000     .0099198    .0110107
   2016#<35  |   .0228601   .0006048    37.80   0.000     .0216746    .0240455
 2016#35-44  |   .0213091   .0005268    40.45   0.000     .0202765    .0223416
 2016#45-54  |    .017653     .00045    39.23   0.000      .016771    .0185351
   2016#55+  |   .0106788   .0002867    37.24   0.000     .0101168    .0112408
   2017#<35  |   .0209125   .0005679    36.82   0.000     .0197994    .0220256
 2017#35-44  |   .0199564   .0005107    39.07   0.000     .0189554    .0209574
 2017#45-54  |   .0183404   .0004662    39.34   0.000     .0174266    .0192542
   2017#55+  |   .0108418   .0002794    38.80   0.000     .0102941    .0113895
------------------------------------------------------------------------------

. 
. * by race
. logit divorced i.year##i.rac3 age age2 yrsmar i.marrno foreign i.edcat [pweight=perwt]

Iteration 0:   log pseudolikelihood = -579019.13  
Iteration 1:   log pseudolikelihood = -558130.35  
Iteration 2:   log pseudolikelihood = -554207.39  
Iteration 3:   log pseudolikelihood = -554143.15  
Iteration 4:   log pseudolikelihood = -554142.96  
Iteration 5:   log pseudolikelihood = -554142.96  

Logistic regression                             Number of obs     =  6,878,909
                                                Wald chi2(48)     =   27034.06
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -554142.96               Pseudo R2         =     0.0430

--------------------------------------------------------------------------------
               |               Robust
      divorced |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
          year |
         2009  |  -.0438592   .0200745    -2.18   0.029    -.0832045   -.0045139
         2010  |  -.0168799   .0198899    -0.85   0.396    -.0558634    .0221036
         2011  |   .0235593   .0210038     1.12   0.262    -.0176074     .064726
         2012  |   .0152793   .0206871     0.74   0.460    -.0252667    .0558254
         2013  |  -.0286663   .0209487    -1.37   0.171     -.069725    .0123924
         2014  |  -.0696048    .021103    -3.30   0.001    -.1109658   -.0282437
         2015  |  -.0933566   .0214013    -4.36   0.000    -.1353025   -.0514108
         2016  |  -.0724948    .021511    -3.37   0.001    -.1146556   -.0303341
         2017  |  -.1153589   .0213695    -5.40   0.000    -.1572423   -.0734754
               |
          rac3 |
        Black  |   .4781971   .0355555    13.45   0.000     .4085095    .5478847
     Hispanic  |   .0951644   .0358417     2.66   0.008      .024916    .1654128
        Other  |   .0155661   .0506139     0.31   0.758    -.0836352    .1147675
               |
     year#rac3 |
   2009#Black  |   .0017003   .0513383     0.03   0.974     -.098921    .1023216
2009#Hispanic  |  -.1080473   .0506736    -2.13   0.033    -.2073658   -.0087288
   2009#Other  |  -.0735966   .0722704    -1.02   0.309     -.215244    .0680509
   2010#Black  |   .0497728    .050412     0.99   0.323    -.0490329    .1485785
2010#Hispanic  |  -.0746872   .0493243    -1.51   0.130     -.171361    .0219867
   2010#Other  |  -.0268864   .0695313    -0.39   0.699    -.1631653    .1093925
   2011#Black  |  -.0717984   .0532299    -1.35   0.177    -.1761271    .0325303
2011#Hispanic  |  -.0861343   .0528228    -1.63   0.103    -.1896651    .0173965
   2011#Other  |  -.1494287   .0730201    -2.05   0.041    -.2925454    -.006312
   2012#Black  |   .0495015   .0514748     0.96   0.336    -.0513871    .1503902
2012#Hispanic  |  -.0475674   .0501797    -0.95   0.343    -.1459178    .0507829
   2012#Other  |   .0279933   .0698721     0.40   0.689    -.1089536    .1649402
   2013#Black  |   .0036607   .0524846     0.07   0.944    -.0992071    .1065286
2013#Hispanic  |  -.0727238   .0511243    -1.42   0.155    -.1729256    .0274779
   2013#Other  |  -.1307895   .0717419    -1.82   0.068     -.271401    .0098221
   2014#Black  |   .0100451   .0535434     0.19   0.851    -.0948981    .1149883
2014#Hispanic  |  -.0139569   .0518737    -0.27   0.788    -.1156275    .0877138
   2014#Other  |  -.0307918   .0724347    -0.43   0.671    -.1727612    .1111777
   2015#Black  |   .0237338   .0541091     0.44   0.661    -.0823182    .1297857
2015#Hispanic  |  -.0823177   .0531968    -1.55   0.122    -.1865816    .0219462
   2015#Other  |   .0249633   .0723195     0.35   0.730    -.1167804    .1667069
   2016#Black  |   .0237725   .0531366     0.45   0.655    -.0803733    .1279182
2016#Hispanic  |  -.0595108   .0511793    -1.16   0.245    -.1598204    .0407989
   2016#Other  |  -.0777243   .0720115    -1.08   0.280    -.2188642    .0634156
   2017#Black  |   .0677136   .0543794     1.25   0.213     -.038868    .1742953
2017#Hispanic  |  -.0224057   .0519571    -0.43   0.666    -.1242398    .0794284
   2017#Other  |  -.0493547   .0705178    -0.70   0.484     -.187567    .0888576
               |
           age |  -.0007153   .0020076    -0.36   0.722    -.0046501    .0032196
          age2 |   -.000292   .0000212   -13.75   0.000    -.0003336   -.0002504
        yrsmar |  -.0167732   .0005645   -29.71   0.000    -.0178797   -.0156668
               |
        marrno |
            2  |   .4051339   .0110841    36.55   0.000     .3834095    .4268583
            3  |   .8246427   .0169144    48.75   0.000      .791491    .8577944
               |
       foreign |  -.3618275   .0140573   -25.74   0.000    -.3893794   -.3342756
               |
         edcat |
           HS  |   .0200571   .0149502     1.34   0.180    -.0092447     .049359
     Some col  |   .0566517   .0154475     3.67   0.000     .0263752    .0869281
          BA+  |  -.3277325   .0159552   -20.54   0.000     -.359004    -.296461
               |
         _cons |  -3.003443     .04788   -62.73   0.000    -3.097286     -2.9096
--------------------------------------------------------------------------------

. margins i.year##i.rac3

Predictive margins                              Number of obs     =  6,878,909
Model VCE    : Robust

Expression   : Pr(divorced), predict()

--------------------------------------------------------------------------------
               |            Delta-method
               |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
          year |
         2008  |   .0191046   .0002177    87.77   0.000      .018678    .0195312
         2009  |   .0179538   .0002078    86.41   0.000     .0175466     .018361
         2010  |   .0186827   .0002095    89.17   0.000      .018272    .0190933
         2011  |   .0189747   .0002371    80.02   0.000     .0185099    .0194394
         2012  |   .0194136   .0002307    84.16   0.000     .0189615    .0198657
         2013  |   .0182558   .0002239    81.52   0.000     .0178169    .0186948
         2014  |   .0178058   .0002231    79.82   0.000     .0173686     .018243
         2015  |   .0173199   .0002227    77.77   0.000     .0168835    .0177564
         2016  |   .0176228   .0002238    78.73   0.000     .0171841    .0180615
         2017  |   .0171171   .0002183    78.42   0.000     .0166893    .0175449
               |
          rac3 |
     White NH  |    .017253   .0000868   198.82   0.000     .0170829    .0174231
        Black  |   .0278363   .0003041    91.55   0.000     .0272403    .0284322
     Hispanic  |   .0179176   .0002162    82.87   0.000     .0174938    .0183413
        Other  |    .016727   .0002795    59.86   0.000     .0161793    .0172748
               |
     year#rac3 |
2008#White NH  |   .0179136   .0002508    71.43   0.000     .0174221    .0184052
   2008#Black  |   .0284615   .0008892    32.01   0.000     .0267186    .0302043
2008#Hispanic  |   .0196529    .000621    31.65   0.000     .0184359      .02087
   2008#Other  |   .0181875   .0008558    21.25   0.000     .0165101    .0198649
2009#White NH  |   .0171634   .0002385    71.96   0.000     .0166959    .0176309
   2009#Black  |   .0273312    .000904    30.23   0.000     .0255593     .029103
2009#Hispanic  |   .0169489   .0005734    29.56   0.000     .0158251    .0180728
   2009#Other  |   .0162177   .0008064    20.11   0.000     .0146372    .0177983
2010#White NH  |   .0176212   .0002404    73.30   0.000       .01715    .0180924
   2010#Black  |   .0293744   .0009324    31.51   0.000      .027547    .0312018
2010#Hispanic  |   .0179766   .0005726    31.40   0.000     .0168544    .0190988
   2010#Other  |   .0174277   .0008013    21.75   0.000     .0158572    .0189981
2011#White NH  |   .0183297   .0002774    66.08   0.000      .017786    .0188734
   2011#Black  |   .0271718   .0009575    28.38   0.000      .025295    .0290485
2011#Hispanic  |   .0184917   .0006656    27.78   0.000      .017187    .0197963
   2011#Other  |   .0160849   .0008131    19.78   0.000     .0144914    .0176785
2012#White NH  |   .0181824   .0002678    67.89   0.000     .0176575    .0187073
   2012#Black  |   .0302861    .000993    30.50   0.000       .02834    .0322323
2012#Hispanic  |   .0190451   .0006185    30.79   0.000     .0178329    .0202574
   2012#Other  |   .0189704   .0008717    21.76   0.000      .017262    .0206789
2013#White NH  |   .0174197    .000263    66.24   0.000     .0169043    .0179351
   2013#Black  |   .0277858   .0009499    29.25   0.000     .0259239    .0296476
2013#Hispanic  |   .0178052    .000602    29.58   0.000     .0166253    .0189851
   2013#Other  |   .0155653    .000759    20.51   0.000     .0140776    .0170529
2014#White NH  |   .0167374   .0002563    65.30   0.000      .016235    .0172398
   2014#Black  |   .0268773   .0009577    28.06   0.000     .0250003    .0287544
2014#Hispanic  |   .0181174   .0006279    28.85   0.000     .0168867    .0193481
   2014#Other  |   .0164903   .0008173    20.18   0.000     .0148886    .0180921
2015#White NH  |   .0163535   .0002567    63.70   0.000     .0158504    .0168567
   2015#Black  |   .0266182   .0009664    27.54   0.000      .024724    .0285123
2015#Hispanic  |   .0165601   .0006031    27.46   0.000     .0153781     .017742
   2015#Other  |   .0170138   .0008398    20.26   0.000     .0153678    .0186599
2016#White NH  |   .0166902   .0002644    63.12   0.000      .016172    .0172085
   2016#Black  |   .0271591   .0009458    28.72   0.000     .0253054    .0290129
2016#Hispanic  |   .0172814   .0005777    29.91   0.000      .016149    .0184137
   2016#Other  |   .0157065   .0007658    20.51   0.000     .0142057    .0172074
2017#White NH  |   .0160056   .0002509    63.80   0.000     .0155139    .0164974
   2017#Black  |   .0271873   .0009972    27.26   0.000     .0252328    .0291418
2017#Hispanic  |   .0171845   .0005949    28.89   0.000     .0160185    .0183505
   2017#Other  |   .0154854   .0007273    21.29   0.000       .01406    .0169108
--------------------------------------------------------------------------------

. 
. * by parity
. logit divorced i.year##i.marrno age age2 yrsmar foreign i.edcat i.rac3 [pweight=perwt]

Iteration 0:   log pseudolikelihood = -579019.13  
Iteration 1:   log pseudolikelihood = -558159.93  
Iteration 2:   log pseudolikelihood = -554207.68  
Iteration 3:   log pseudolikelihood = -554142.45  
Iteration 4:   log pseudolikelihood = -554142.25  
Iteration 5:   log pseudolikelihood = -554142.25  

Logistic regression                             Number of obs     =  6,878,909
                                                Wald chi2(39)     =   26899.68
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -554142.25               Pseudo R2         =     0.0430

------------------------------------------------------------------------------
             |               Robust
    divorced |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2009  |   -.058752   .0204555    -2.87   0.004     -.098844     -.01866
       2010  |  -.0303781   .0201215    -1.51   0.131    -.0698156    .0090593
       2011  |  -.0124488    .021239    -0.59   0.558    -.0540765    .0291789
       2012  |  -.0014316    .020672    -0.07   0.945    -.0419479    .0390848
       2013  |  -.0686571   .0210177    -3.27   0.001     -.109851   -.0274633
       2014  |  -.0984978   .0211747    -4.65   0.000    -.1399996   -.0569961
       2015  |    -.13068   .0215323    -6.07   0.000    -.1728825   -.0884775
       2016  |  -.0976078   .0212611    -4.59   0.000    -.1392788   -.0559368
       2017  |  -.1416641   .0214478    -6.61   0.000    -.1837009   -.0996272
             |
      marrno |
          2  |   .3508775   .0284623    12.33   0.000     .2950924    .4066626
          3  |   .7941319    .043332    18.33   0.000     .7092027    .8790611
             |
 year#marrno |
     2009 2  |   .0160419   .0391326     0.41   0.682    -.0606566    .0927404
     2009 3  |  -.0818187   .0596885    -1.37   0.170    -.1988061    .0351687
     2010 2  |   .0135743   .0390451     0.35   0.728    -.0629527    .0901012
     2010 3  |    .061463   .0575958     1.07   0.286    -.0514226    .1743487
     2011 2  |   .0316458    .041265     0.77   0.443     -.049232    .1125237
     2011 3  |  -.0054423   .0620446    -0.09   0.930    -.1270475    .1161628
     2012 2  |   .0753991    .040137     1.88   0.060     -.003268    .1540663
     2012 3  |    .012092   .0609959     0.20   0.843    -.1074579    .1316418
     2013 2  |   .0779896   .0410544     1.90   0.057    -.0024756    .1584548
     2013 3  |    .053376   .0603806     0.88   0.377    -.0649677    .1717198
     2014 2  |   .0949163   .0417081     2.28   0.023     .0131698    .1766627
     2014 3  |   .0611365   .0615547     0.99   0.321    -.0595086    .1817816
     2015 2  |   .1002604   .0421003     2.38   0.017     .0177453    .1827754
     2015 3  |   .0892071    .062375     1.43   0.153    -.0330455    .2114598
     2016 2  |   .0318683    .041854     0.76   0.446     -.050164    .1139005
     2016 3  |   .0933296    .063548     1.47   0.142    -.0312222    .2178815
     2017 2  |   .1186064   .0415135     2.86   0.004     .0372415    .1999714
     2017 3  |   .0339837   .0636615     0.53   0.593    -.0907906    .1587579
             |
         age |  -.0004917   .0020075    -0.24   0.807    -.0044263     .003443
        age2 |  -.0002946   .0000212   -13.88   0.000    -.0003363    -.000253
      yrsmar |  -.0167755   .0005646   -29.71   0.000    -.0178821   -.0156689
     foreign |  -.3619376   .0140584   -25.75   0.000    -.3894916   -.3343836
             |
       edcat |
         HS  |   .0200926    .014948     1.34   0.179     -.009205    .0493901
   Some col  |   .0564809   .0154462     3.66   0.000      .026207    .0867549
        BA+  |  -.3277835   .0159562   -20.54   0.000    -.3590571     -.29651
             |
        rac3 |
      Black  |   .4935286   .0124832    39.54   0.000     .4690619    .5179952
   Hispanic  |   .0387214   .0142527     2.72   0.007     .0107867    .0666562
      Other  |  -.0316952    .018469    -1.72   0.086    -.0678938    .0045034
             |
       _cons |  -2.984023   .0475646   -62.74   0.000    -3.077248   -2.890798
------------------------------------------------------------------------------

. margins i.year##i.marrno

Predictive margins                              Number of obs     =  6,878,909
Model VCE    : Robust

Expression   : Pr(divorced), predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2008  |   .0190891   .0002174    87.79   0.000      .018663    .0195153
       2009  |   .0179782   .0002078    86.50   0.000     .0175708    .0183856
       2010  |   .0186836   .0002096    89.16   0.000     .0182728    .0190943
       2011  |   .0189854   .0002373    80.02   0.000     .0185204    .0194505
       2012  |   .0194113   .0002307    84.15   0.000     .0189592    .0198634
       2013  |   .0182546    .000224    81.50   0.000     .0178155    .0186936
       2014  |   .0178139   .0002234    79.76   0.000     .0173761    .0182517
       2015  |   .0173267    .000223    77.69   0.000     .0168896    .0177638
       2016  |   .0176195   .0002237    78.78   0.000     .0171811    .0180579
       2017  |   .0171387   .0002187    78.36   0.000       .01671    .0175674
             |
      marrno |
          1  |   .0159668   .0000781   204.42   0.000     .0158137    .0161199
          2  |   .0236921   .0002116   111.94   0.000     .0232773    .0241069
          3  |   .0354329   .0005212    67.99   0.000     .0344115    .0364544
             |
 year#marrno |
     2008 1  |   .0169655   .0002376    71.40   0.000     .0164998    .0174313
     2008 2  |   .0238594   .0005605    42.57   0.000     .0227608     .024958
     2008 3  |   .0364955   .0014067    25.94   0.000     .0337385    .0392526
     2009 1  |   .0160192   .0002307    69.43   0.000      .015567    .0164714
     2009 2  |   .0228936   .0005241    43.68   0.000     .0218663    .0239208
     2009 3  |   .0319203   .0012286    25.98   0.000     .0295123    .0343284
     2010 1  |   .0164696   .0002295    71.77   0.000     .0160198    .0169194
     2010 2  |   .0234748   .0005399    43.48   0.000     .0224165    .0245331
     2010 3  |   .0375882   .0013278    28.31   0.000     .0349857    .0401907
     2011 1  |   .0167606   .0002589    64.74   0.000     .0162531     .017268
     2011 2  |   .0243062   .0006217    39.10   0.000     .0230877    .0255248
     2011 3  |   .0358804   .0014787    24.27   0.000     .0329822    .0387786
     2012 1  |   .0169419   .0002484    68.20   0.000      .016455    .0174287
     2012 2  |   .0256259   .0006215    41.23   0.000     .0244077    .0268441
     2012 3  |   .0368668   .0014734    25.02   0.000      .033979    .0397547
     2013 1  |   .0158648   .0002402    66.05   0.000      .015394    .0163356
     2013 2  |   .0240756   .0006128    39.29   0.000     .0228746    .0252767
     2013 3  |   .0359695   .0014004    25.69   0.000     .0332248    .0387143
     2014 1  |   .0154084   .0002366    65.13   0.000     .0149447    .0158721
     2014 2  |   .0237769   .0006268    37.94   0.000     .0225485    .0250053
     2014 3  |   .0352221   .0014303    24.63   0.000     .0324187    .0380255
     2015 1  |   .0149306   .0002361    63.24   0.000     .0144679    .0153933
     2015 2  |   .0231676   .0006175    37.52   0.000     .0219573    .0243778
     2015 3  |   .0350846   .0014608    24.02   0.000     .0322215    .0379477
     2016 1  |   .0154218   .0002382    64.76   0.000      .014955    .0158886
     2016 2  |   .0223886   .0005937    37.71   0.000     .0212249    .0235523
     2016 3  |   .0363475   .0015711    23.13   0.000     .0332682    .0394268
     2017 1  |   .0147709   .0002319    63.71   0.000     .0143164    .0152253
     2017 2  |   .0233332    .000603    38.70   0.000     .0221514     .024515
     2017 3  |   .0329391   .0014322    23.00   0.000     .0301321    .0357461
------------------------------------------------------------------------------

. 
. * by education
. logit divorced i.year##i.edcat age age2 yrsmar i.marrno foreign i.rac3 [pweight=perwt]

Iteration 0:   log pseudolikelihood = -579019.13  
Iteration 1:   log pseudolikelihood = -558125.83  
Iteration 2:   log pseudolikelihood = -554213.04  
Iteration 3:   log pseudolikelihood = -554149.18  
Iteration 4:   log pseudolikelihood = -554148.99  
Iteration 5:   log pseudolikelihood = -554148.99  

Logistic regression                             Number of obs     =  6,878,909
                                                Wald chi2(48)     =   26993.93
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -554148.99               Pseudo R2         =     0.0430

--------------------------------------------------------------------------------
               |               Robust
      divorced |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
          year |
         2009  |   -.099434    .052242    -1.90   0.057    -.2018265    .0029585
         2010  |  -.0063885   .0507432    -0.13   0.900    -.1058433    .0930663
         2011  |   .0367392   .0522355     0.70   0.482    -.0656404    .1391188
         2012  |   .0437032   .0532473     0.82   0.412    -.0606595     .148066
         2013  |  -.0405242   .0542409    -0.75   0.455    -.1468344    .0657859
         2014  |  -.0400273   .0554045    -0.72   0.470    -.1486182    .0685636
         2015  |  -.0410715   .0569371    -0.72   0.471    -.1526661    .0705232
         2016  |  -.0350613   .0557447    -0.63   0.529    -.1443189    .0741963
         2017  |  -.0039854   .0556033    -0.07   0.943    -.1129658     .104995
               |
         edcat |
           HS  |   .0688167   .0417947     1.65   0.100    -.0130993    .1507327
     Some col  |   .0772062   .0431835     1.79   0.074    -.0074319    .1618443
          BA+  |  -.3141035   .0437079    -7.19   0.000    -.3997693   -.2284376
               |
    year#edcat |
      2009#HS  |   .0165566    .059202     0.28   0.780    -.0994773    .1325904
2009#Some col  |   .0466139   .0610414     0.76   0.445     -.073025    .1662528
     2009#BA+  |   .0758358   .0614141     1.23   0.217    -.0445335    .1962051
      2010#HS  |  -.0455971   .0577643    -0.79   0.430     -.158813    .0676189
2010#Some col  |  -.0106032   .0594441    -0.18   0.858    -.1271115    .1059052
     2010#BA+  |   .0179744   .0600138     0.30   0.765    -.0996506    .1355993
      2011#HS  |  -.0489879   .0598682    -0.82   0.413    -.1663273    .0683516
2011#Some col  |  -.0303278   .0616947    -0.49   0.623    -.1512473    .0905916
     2011#BA+  |  -.0628425   .0624032    -1.01   0.314    -.1851506    .0594655
      2012#HS  |  -.0414963   .0604349    -0.69   0.492    -.1599466    .0769541
2012#Some col  |  -.0171753   .0619018    -0.28   0.781    -.1385006      .10415
     2012#BA+  |  -.0232736   .0626648    -0.37   0.710    -.1460943    .0995471
      2013#HS  |  -.0295554   .0614851    -0.48   0.631    -.1500639    .0909531
2013#Some col  |   .0008457   .0631348     0.01   0.989    -.1228963    .1245876
     2013#BA+  |   .0211457    .063704     0.33   0.740    -.1037117    .1460032
      2014#HS  |  -.0719195   .0627312    -1.15   0.252    -.1948704    .0510314
2014#Some col  |   .0090943   .0642487     0.14   0.887    -.1168308    .1350193
     2014#BA+  |  -.0327705   .0647915    -0.51   0.613    -.1597596    .0942186
      2015#HS  |  -.0900418   .0644573    -1.40   0.162    -.2163758    .0362923
2015#Some col  |  -.0642317   .0660438    -0.97   0.331    -.1936753    .0652118
     2015#BA+  |  -.0301023   .0657647    -0.46   0.647    -.1589988    .0987941
      2016#HS  |  -.0750234   .0633275    -1.18   0.236    -.1991431    .0490963
2016#Some col  |  -.0345542   .0648898    -0.53   0.594    -.1617359    .0926275
     2016#BA+  |  -.0383626   .0646541    -0.59   0.553    -.1650823    .0883571
      2017#HS  |  -.1316231   .0632876    -2.08   0.038    -.2556645   -.0075818
2017#Some col  |  -.1308511   .0649971    -2.01   0.044    -.2582432    -.003459
     2017#BA+  |  -.0853916   .0644277    -1.33   0.185    -.2116676    .0408844
               |
           age |  -.0007996   .0020067    -0.40   0.690    -.0047326    .0031334
          age2 |  -.0002911   .0000212   -13.72   0.000    -.0003327   -.0002495
        yrsmar |  -.0167706   .0005645   -29.71   0.000     -.017877   -.0156643
               |
        marrno |
            2  |   .4052947   .0110838    36.57   0.000     .3835709    .4270185
            3  |   .8250175   .0169128    48.78   0.000     .7918691     .858166
               |
       foreign |  -.3618452   .0140593   -25.74   0.000    -.3894009   -.3342895
               |
          rac3 |
        Black  |   .4938517   .0124844    39.56   0.000     .4693828    .5183206
     Hispanic  |   .0387931   .0142552     2.72   0.007     .0108536    .0667327
        Other  |  -.0322695   .0184702    -1.75   0.081    -.0684705    .0039314
               |
         _cons |  -3.020799   .0570519   -52.95   0.000    -3.132619    -2.90898
--------------------------------------------------------------------------------

. margins i.year##i.edcat

Predictive margins                              Number of obs     =  6,878,909
Model VCE    : Robust

Expression   : Pr(divorced), predict()

--------------------------------------------------------------------------------
               |            Delta-method
               |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
          year |
         2008  |   .0190693   .0002168    87.96   0.000     .0186444    .0194942
         2009  |   .0179867   .0002075    86.69   0.000     .0175801    .0183934
         2010  |    .018692   .0002095    89.24   0.000     .0182815    .0191026
         2011  |   .0189719    .000237    80.07   0.000     .0185074    .0194363
         2012  |   .0194109   .0002306    84.18   0.000      .018959    .0198629
         2013  |   .0182527   .0002239    81.51   0.000     .0178138    .0186916
         2014  |   .0178102   .0002234    79.73   0.000     .0173724     .018248
         2015  |   .0173187   .0002236    77.46   0.000     .0168805    .0177569
         2016  |   .0176225   .0002245    78.48   0.000     .0171824    .0180626
         2017  |   .0171329     .00022    77.88   0.000     .0167017    .0175641
               |
         edcat |
          <HS  |   .0196187    .000256    76.64   0.000     .0191169    .0201204
           HS  |   .0199653   .0001341   148.94   0.000     .0197025     .020228
     Some col  |   .0206917   .0001497   138.23   0.000     .0203983    .0209851
          BA+  |   .0142201   .0001084   131.19   0.000     .0140077    .0144326
               |
    year#edcat |
     2008#<HS  |   .0199625   .0007173    27.83   0.000     .0185567    .0213683
      2008#HS  |   .0213424   .0004037    52.86   0.000     .0205511    .0221337
2008#Some col  |   .0215168    .000463    46.47   0.000     .0206093    .0224244
     2008#BA+  |   .0146916   .0003312    44.36   0.000     .0140424    .0153408
     2009#<HS  |   .0181207   .0006633    27.32   0.000     .0168206    .0194207
      2009#HS  |   .0196914   .0003826    51.47   0.000     .0189416    .0204412
2009#Some col  |   .0204413   .0004469    45.74   0.000     .0195654    .0213171
     2009#BA+  |   .0143558    .000321    44.72   0.000     .0137267     .014985
     2010#<HS  |   .0198389   .0006832    29.04   0.000     .0184997     .021178
      2010#HS  |   .0202917   .0003869    52.45   0.000     .0195335      .02105
2010#Some col  |    .021165   .0004444    47.62   0.000     .0202939    .0220361
     2010#BA+  |   .0148593   .0003273    45.41   0.000     .0142178    .0155007
     2011#<HS  |    .020688   .0007541    27.43   0.000     .0192099    .0221661
      2011#HS  |   .0210902   .0004483    47.05   0.000     .0202116    .0219688
2011#Some col  |   .0216511   .0005087    42.56   0.000      .020654    .0226481
     2011#BA+  |   .0143206   .0003564    40.18   0.000     .0136221    .0150192
     2012#<HS  |   .0208284   .0007877    26.44   0.000     .0192845    .0223723
      2012#HS  |   .0213882   .0004355    49.12   0.000     .0205347    .0222416
2012#Some col  |   .0220775   .0004814    45.86   0.000     .0211341     .023021
     2012#BA+  |   .0149885   .0003502    42.80   0.000     .0143021    .0156748
     2013#<HS  |   .0191908   .0007527    25.50   0.000     .0177156    .0206661
      2013#HS  |    .019938   .0004159    47.94   0.000     .0191229    .0207531
2013#Some col  |   .0207039   .0004728    43.79   0.000     .0197771    .0216306
     2013#BA+  |   .0144153   .0003445    41.84   0.000       .01374    .0150906
     2014#<HS  |   .0192001   .0007833    24.51   0.000      .017665    .0207353
      2014#HS  |   .0191422   .0004122    46.44   0.000     .0183344    .0199501
2014#Some col  |   .0208805    .000483    43.23   0.000     .0199338    .0218272
     2014#BA+  |   .0136798   .0003312    41.31   0.000     .0130307    .0143288
     2015#<HS  |   .0191806   .0008188    23.43   0.000     .0175758    .0207854
      2015#HS  |   .0187883   .0004238    44.34   0.000     .0179578    .0196189
2015#Some col  |   .0194243   .0004742    40.96   0.000     .0184949    .0203538
     2015#BA+  |   .0137016   .0003189    42.97   0.000     .0130767    .0143265
     2016#<HS  |   .0192932   .0007947    24.28   0.000     .0177356    .0208507
      2016#HS  |    .019177   .0004281    44.79   0.000     .0183379    .0200161
2016#Some col  |   .0201103   .0004839    41.56   0.000      .019162    .0210587
     2016#BA+  |   .0136714   .0003147    43.44   0.000     .0130545    .0142883
     2017#<HS  |   .0198853   .0008146    24.41   0.000     .0182888    .0214818
      2017#HS  |   .0187063    .000422    44.32   0.000     .0178791    .0195334
2017#Some col  |   .0188739   .0004656    40.54   0.000     .0179614    .0197864
     2017#BA+  |   .0134591   .0003068    43.87   0.000     .0128578    .0140604
--------------------------------------------------------------------------------

. 
. /* for newlywed prediction formula */
. 
. /* Table 3
>    Generate coefficients to apply to the newlywed sample, to predict their divorce risk. 
>    This replaces yrsmar with ageatmar to produce an age coefficient for newlyweds.
>    It runs on marriages in their first 10 years (<10yrsmar), for 2017 only
> */
. 
. logit divorced ageatmar i.marrno i.foreign i.edcat i.rac3 if yrsmar<10 & year==2017 [pweight=perwt
> ]

Iteration 0:   log pseudolikelihood = -20107.127  
Iteration 1:   log pseudolikelihood = -19689.762  
Iteration 2:   log pseudolikelihood = -19655.281  
Iteration 3:   log pseudolikelihood = -19655.206  
Iteration 4:   log pseudolikelihood = -19655.206  

Logistic regression                             Number of obs     =    168,090
                                                Wald chi2(10)     =     549.65
                                                Prob > chi2       =     0.0000
Log pseudolikelihood = -19655.206               Pseudo R2         =     0.0225

------------------------------------------------------------------------------
             |               Robust
    divorced |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    ageatmar |  -.0288146    .002496   -11.54   0.000    -.0337066   -.0239225
             |
      marrno |
          2  |   .7183058   .0561807    12.79   0.000     .6081936     .828418
          3  |   1.200373   .0828422    14.49   0.000     1.038005    1.362741
             |
   1.foreign |  -.3029773   .0731719    -4.14   0.000    -.4463915    -.159563
             |
       edcat |
         HS  |   .1340403   .0880182     1.52   0.128    -.0384721    .3065528
   Some col  |   .1314363   .0897754     1.46   0.143    -.0445202    .3073928
        BA+  |  -.2955606   .0913255    -3.24   0.001    -.4745553   -.1165659
             |
        rac3 |
      Black  |    .375711   .0680953     5.52   0.000     .2422467    .5091754
   Hispanic  |  -.0977494   .0707266    -1.38   0.167    -.2363711    .0408722
      Other  |   -.098973   .0936588    -1.06   0.291    -.2825408    .0845949
             |
       _cons |  -2.979024   .1121052   -26.57   0.000    -3.198746   -2.759302
------------------------------------------------------------------------------

. /* this is the result:
> (       ageatmar    *   -0.0288146      ) +      ///
> (       (marrno==2) *   0.7183058       ) +      ///
> (       (marrno==3) *   1.200373        ) +      ///
> (       foreign     *   -0.3029773      ) +      ///
> (       (edcat==2)  *   0.1340403       ) +      ///
> (       (edcat==3)  *   0.1314363       ) +      ///
> (       (edcat==4)  *   -0.2955606      ) +      ///
> (       (rac3==2)   *   0.375711        ) +      ///
> (       (rac3==3)   *   -0.0977494      ) +      ///
> (       (rac3==4)   *   -0.098973       )        ///
>         -2.979024               
> */
. 
.    
. /* Analysis of selection into marriage and associated marriage risk, 2008-2017 */
. 
. * NOTE: You need to set the Stata working directory to the path
. * where the data file is located.
. 
. set more off

. 
. clear

. quietly infix              ///
>   int     year       1-4    ///
>   double  perwt      5-14   ///
>   byte    sex        15-15  ///
>   int     age        16-18  ///
>   byte    marrno     19-19  ///
>   byte    marrinyr   20-20  ///
>   byte    race       21-21  ///
>   int     raced      22-24  ///
>   byte    hispan     25-25  ///
>   int     hispand    26-28  ///
>   byte    citizen    29-29  ///
>   byte    educ       30-31  ///
>   int     educd      32-34  ///
>   int     age_sp     35-37  ///
>   byte    marrno_sp  38-38  ///
>   byte    race_sp    39-39  ///
>   byte    hispan_sp  40-40  ///
>   int     educd_sp   41-43  ///  
>   using "${pathname}/usa_00400.dat"

. 
. /*  2008-2017 ACS, sample is women who married in the year before the survey. */
. 
. /*  The _sp variables are her spouse's characteristics (regardless of spouse gender)
>     I don't use the in the paper anymore but they were used in the earlier versions so I'm leaving
>  them in */
. 
. replace perwt    = perwt    / 100
(210,829 real changes made)

. format perwt    %10.2f

. 
. gen foreign = citizen>0

. 
. label var year     "Survey year"

. label var perwt    "Person weight"

. label var age      "Age"

. label var marrno   "Times married"

. label var race     "Race [general version]"

. label var hispan   "Hispanic origin [general version]"

. label var educd    "Educational attainment [detailed version]"

. 
. recode educd (0/61=1)(62/65=2) (70/100=3) (101/116=4), gen(edcat)
(210829 differences between educd and edcat)

. 
. label define edcat_lbl 1 "<HS"

. label define edcat_lbl 2 "HS", add

. label define edcat_lbl 3 "Some col", add

. label define edcat_lbl 4 "BA+", add

. label values edcat edcat_lbl

. 
. gen rac3=4

. replace rac3=1 if race==1 & hispan==0
(141,976 real changes made)

. replace rac3=2 if race==2 
(17,482 real changes made)

. replace rac3=3 if hispan>0
(32,451 real changes made)

. 
. label define rac3_lbl 1 "White NH"

. label define rac3_lbl 2 "Black", add

. label define rac3_lbl 3 "Hispanic", add

. label define rac3_lbl 4 "Other", add

. label values rac3 rac3_lbl

. 
. /* in the previous draft I made an arbitrary divorce risk scale. This is a little more scientific,
>  based on the regression above. */
. 
.         gen divcoef =                            ///
> (       age         *   -0.0288146      ) +      ///
> (       (marrno==2) *   0.7183058       ) +      ///
> (       (marrno==3) *   1.200373        ) +      ///
> (       foreign     *   -0.3029773      ) +      ///
> (       (edcat==2)  *   0.1340403       ) +      ///
> (       (edcat==3)  *   0.1314363       ) +      ///
> (       (edcat==4)  *   -0.2955606      ) +      ///
> (       (rac3==2)   *   0.375711        ) +      ///
> (       (rac3==3)   *   -0.0977494      ) +      ///
> (       (rac3==4)   *   -0.098973       )        ///
>                         -2.979024               

. 
. gen divprob  = exp(divcoef)/(1+exp(divcoef)) /* convert coefs into probabilities */

. 
. /* to test linear trend */
. reg divprob year [weight=perwt]
(analytic weights assumed)
(sum of wgt is 22,154,431)

      Source |       SS           df       MS      Number of obs   =   210,829
-------------+----------------------------------   F(1, 210827)    =   1679.87
       Model |  .235498578         1  .235498578   Prob > F        =    0.0000
    Residual |  29.5554675   210,827  .000140188   R-squared       =    0.0079
-------------+----------------------------------   Adj R-squared   =    0.0079
       Total |  29.7909661   210,828  .000141305   Root MSE        =    .01184

------------------------------------------------------------------------------
     divprob |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |  -.0003649   8.90e-06   -40.99   0.000    -.0003824   -.0003475
       _cons |   .7596969   .0179195    42.40   0.000     .7245752    .7948186
------------------------------------------------------------------------------

. 
. 
. /* to plot means with error bars (this is the same as doing: mean divprob, over(year))*/
. reg divprob i.year [weight=perwt]
(analytic weights assumed)
(sum of wgt is 22,154,431)

      Source |       SS           df       MS      Number of obs   =   210,829
-------------+----------------------------------   F(9, 210819)    =    189.37
       Model |  .238904301         9  .026544922   Prob > F        =    0.0000
    Residual |  29.5520618   210,819  .000140177   R-squared       =    0.0080
-------------+----------------------------------   Adj R-squared   =    0.0080
       Total |  29.7909661   210,828  .000141305   Root MSE        =    .01184

------------------------------------------------------------------------------
     divprob |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2009  |   -.000151   .0001155    -1.31   0.191    -.0003773    .0000753
       2010  |  -.0007452   .0001164    -6.40   0.000    -.0009733    -.000517
       2011  |  -.0007291   .0001166    -6.25   0.000    -.0009577   -.0005005
       2012  |  -.0013315   .0001158   -11.50   0.000    -.0015585   -.0011045
       2013  |  -.0015997   .0001164   -13.74   0.000    -.0018279   -.0013716
       2014  |  -.0022937   .0001146   -20.02   0.000    -.0025182   -.0020692
       2015  |  -.0024134    .000114   -21.17   0.000    -.0026369   -.0021899
       2016  |  -.0028163   .0001141   -24.68   0.000    -.0030399   -.0025926
       2017  |  -.0031407   .0001138   -27.60   0.000    -.0033637   -.0029177
             |
       _cons |    .026794   .0000814   329.31   0.000     .0266346    .0269535
------------------------------------------------------------------------------

. margins year

Adjusted predictions                            Number of obs     =    210,829
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        year |
       2008  |    .026794   .0000814   329.31   0.000     .0266346    .0269535
       2009  |    .026643   .0000819   325.18   0.000     .0264825    .0268036
       2010  |   .0260489   .0000832   312.91   0.000     .0258857     .026212
       2011  |   .0260649   .0000836   311.94   0.000     .0259011    .0262287
       2012  |   .0254625   .0000824   309.00   0.000      .025301     .025624
       2013  |   .0251943   .0000832   302.70   0.000     .0250312    .0253574
       2014  |   .0245003   .0000806   303.81   0.000     .0243423    .0246584
       2015  |   .0243806   .0000799   305.24   0.000     .0242241    .0245372
       2016  |   .0239778     .00008   299.72   0.000      .023821    .0241346
       2017  |   .0236534   .0000795   297.42   0.000     .0234975    .0238092
------------------------------------------------------------------------------

. marginsplot, title("Estimated annual divorce probability: newly-married women, 2008-2017", size(me
> dium)) ///
> ytitle(Probability) ylab(.02(.002).028)

  Variables that uniquely identify margins: year

. 
. 
. 
end of do-file

